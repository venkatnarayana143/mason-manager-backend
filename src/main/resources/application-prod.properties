# Production Configuration
spring.application.name=mason-manager
server.port=${PORT:8080}

# PostgreSQL Database (will be provided by cloud platform)
# PostgreSQL Database (Handled by DataSourceConfig.java)
# spring.datasource.url=jdbc:postgresql://${PGHOST}:${PGPORT}/${PGDATABASE}
# spring.datasource.username=${PGUSER}
# spring.datasource.password=${PGPASSWORD}
# spring.datasource.driver-class-name=org.postgresql.Driver
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false

# Actuator endpoints for health checks
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=always
# Disable DB check to prevent 503 errors during startup if DB is slow
management.health.db.enabled=false
management.health.diskspace.enabled=false
management.health.defaults.enabled=true

# Datadog Metrics Configuration
management.metrics.export.datadog.enabled=true
management.metrics.export.datadog.api-key=${DD_API_KEY}
management.metrics.export.datadog.application-key=${DD_APP_KEY:}
management.metrics.export.datadog.uri=https://api.datadoghq.com
management.metrics.export.datadog.step=1m
management.metrics.distribution.percentiles-histogram.http.server.requests=true

# Datadog APM Service Name
dd.service.name=mason-manager
dd.env=production
dd.version=1.0.0

# CORS - Update with your frontend URL after deployment
spring.web.cors.allowed-origins=${FRONTEND_URL:http://localhost:5173}
spring.web.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
spring.web.cors.allowed-headers=*
spring.web.cors.allow-credentials=true
